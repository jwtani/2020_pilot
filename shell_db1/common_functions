# -*-Shell-script-*-
#

# 多重起動チェック
function check_multiple() {
    # 第１引数：チェックする対象
    local target=$1

    # 実行中のプロセス数
    local ps_count=`ps aux | pgrep -xfc '^((/bin/bash )|/|\./)[^ ]*/'${target}'.*$'`

    # 既に起動中ならエラー終了
    if [ ${ps_count} -gt 3 ]; then
        echo This process is already running.
        return 1
    fi

    return 0
}
